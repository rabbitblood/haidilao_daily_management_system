{% extends "base.html" %}

{% block title%}
<link rel="stylesheet" href="{{ url_for('static',filename = 'css/manage/server.css') }}">
{% endblock %}

{% block body %}
<form action="/manage" method="get" class="back_button">
    <input type="submit" value="{{translate_data['back'][language]}}"/>
</form>
<h1 class="title_text">{{translate_data['manage_server_daily_work_info'][language]}}</h1>
{% if userinfo['super_manager'] == True %}
        <form action="{{post_url}}" method="get" class="center_content" id="change_date" name="change_date">
            <input type="date" id="view_and_edit_date" name="view_and_edit_date" onchange="this.form.submit()">
        </form>
{% endif %}
<div>{{translate_data['current_system_date'][language]}}: {{date}}</div>

<div class="daily_server_groups">

    {% if daily_data.get(department_json_data_name)%}
    {% for item in daily_data[department_json_data_name] %}

    <div class="server_group" id="server_group">
        <h3>{{translate_data['recorder'][language]}}: </h3>
        <h3>{{daily_data[department_json_data_name][item]['recorder']}}</h3>

        <div class="one_item_in_line">
            <h1>{{translate_data['group_name'][language]}}</h1>
            <h1>{{daily_data[department_json_data_name][item]['group_name']}}</h1>
        </div>
        <div class="one_item_in_line">
            <div>{{translate_data['shift'][language]}}</div>
            <div>{{daily_data[department_json_data_name][item]['shift']}}</div>
        </div>
        <h3>{{translate_data['group_member'][language]}}</h3>
        <div class="two_items_in_line">
            {%for i in range(0,15)%}
            {% if daily_data[department_json_data_name][item]["team_member" + str(i)] != ""%}
            <div>{{translate_data['team_member'][language]}}</div>
            <div>{{daily_data[department_json_data_name][item]["team_member" + str(i)]}}</div>
            <div>{{translate_data['hours'][language]}}</div>
            <div>{{daily_data[department_json_data_name][item]["team_member" + str(i)+ "_work_hour"]}}</div>
            {% endif %}
            {%endfor%}
        </div>
        {%if daily_data[department_json_data_name][item].get('has_transfer_group') and
        daily_data[department_json_data_name][item]['has_transfer_group'] == 'True'%}
        <h3>{{translate_data['transfer_group_member'][language]}}</h3>
        <div class="two_items_in_line">
            {%for i in range(0,15)%}
            {% if daily_data[department_json_data_name][item]["transfer_member" + str(i)] != ""%}
            <div>{{translate_data['team_member'][language]}}</div>
            <div>{{daily_data[department_json_data_name][item]["transfer_member" + str(i)]}}</div>
            <div>{{translate_data['hours'][language]}}</div>
            <div>{{daily_data[department_json_data_name][item]["transfer_member" + str(i)+ "_work_hour"]}}</div>
            {% endif %}
            {%endfor%}
        </div>
        {%endif%}
        <h3>{{translate_data['money_count'][language]}}</h3>
        <div class="one_item_in_line">
            <div>{{translate_data['start_money'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['start_money']}}</div>
        </div>
        <div class="two_items_in_line">
            <div>{{translate_data['cash'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['cash']}}</div>
            <div>{{translate_data['cash_tips'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['cash_tips']}}</div>
        </div>
        <div class="two_items_in_line">
            <div>{{translate_data['card_total'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['card_total']}}</div>
            <div>{{translate_data['card_tips'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['card_tips']}}</div>
        </div>
        <div class="two_items_in_line">
            <div>{{translate_data['alipay'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['alipay']}}</div>
            <div>{{translate_data['alipay_tips'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['alipay_tips']}}</div>
        </div>
        <div class="two_items_in_line">
            <div>{{translate_data['wechatpay'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['wechatpay']}}</div>
            <div>{{translate_data['wechatpay_tips'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['wechatpay_tips']}}</div>
        </div>
        {%if daily_data[department_json_data_name][item].get('has_transfer_group') and
        daily_data[department_json_data_name][item]['has_transfer_group'] == 'True'%}
        <h3>{{translate_data['transfer_money_count'][language]}}</h3>
        <div class="two_items_in_line">
            <div>{{translate_data['cash'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['transfer_cash']}}</div>
            <div>{{translate_data['cash_tips'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['transfer_cash_tips']}}</div>
        </div>
        <div class="two_items_in_line">
            <div>{{translate_data['card_total'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['transfer_card_total']}}</div>
            <div>{{translate_data['card_tips'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['transfer_card_tips']}}</div>
        </div>
        <div class="two_items_in_line">
            <div>{{translate_data['alipay'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['transfer_alipay']}}</div>
            <div>{{translate_data['alipay_tips'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['transfer_alipay_tips']}}</div>
        </div>
        <div class="two_items_in_line">
            <div>{{translate_data['wechatpay'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['transfer_wechatpay']}}</div>
            <div>{{translate_data['wechatpay_tips'][language]}}:</div>
            <div>{{daily_data[department_json_data_name][item]['transfer_wechatpay_tips']}}</div>
        </div>
        {%endif%}
        {% if userinfo['legal_name'] == daily_data[department_json_data_name][item]['recorder'] or
        all_employee_info[userinfo["employee_number"]]["manage_managers"] == True %}
        <div class="edit_and_delete_button_wrapper">
            <form action="/manage/manage_server_daily_work_info/add_group" method="get">
                <input type="text" id="current_view_and_edit_date" name="current_view_and_edit_date" value="{{date}}" hidden>
                <input type="text" hidden="hidden" value="{{item}}" id="edit_group" name="edit_group">
                <input class="edit_button" type="submit" value="{{translate_data['edit'][language]}}"/>
            </form>
            <form action="/manage/manage_server_daily_work_info" method="post">
                <input type="text" id="current_view_and_edit_date" name="current_view_and_edit_date" value="{{date}}" hidden>
                <input type="text" hidden="hidden" value="{{item}}" id="delete_group" name="delete_group">
                <input class="delete_button" type="submit" value="{{translate_data['delete'][language]}}"/>
            </form>
        </div>
        {% endif %}
    </div>

    {% endfor %}
    {% endif%}

    <form action="/manage/manage_server_daily_work_info/add_group" method="get">
        <input type="text" id="current_view_and_edit_date" name="current_view_and_edit_date" value="{{date}}" hidden>
        <input class="add_group_button" type="submit" value="{{translate_data['add_group'][language]}}"/>
    </form>


</div>
{% endblock %}